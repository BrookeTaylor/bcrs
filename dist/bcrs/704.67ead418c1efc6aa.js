"use strict";(self.webpackChunkbcrs=self.webpackChunkbcrs||[]).push([[704],{6704:(x,g,l)=>{l.r(g),l.d(g,{ShopModule:()=>U});var u=l(6814),p=l(9310);class h{constructor(){this.email="",this.fullName="",this.lineItems=[],this.lineItemTotal=0,this.partsAmount=0,this.laborAmount=0,this.invoiceTotal=0,this.id=Math.floor(9e4*Math.random())+1e4,this.date=(new Date).toLocaleDateString()}itemsTotal(){let t=0;for(const o of this.lineItems)t+=o.price;this.lineItemTotal=parseFloat(t.toFixed(2))}getOrderTotal(){let t=0;for(let o of this.lineItems)t+=o.price;return console.log("Menu Items Total: ",t),t+=parseFloat(this.partsAmount.toString()),t+=parseFloat(this.laborAmount.toString()),console.log("Total after parts and labor: ",t),t.toFixed(2)}}var e=l(4946);let f=(()=>{var r;class t{constructor(){this.products=[{id:100,title:"Password Reset",price:39.99,imgUrl:"../../../assets/service/passwordReset.png",desc:"Locked out of your account? It happens to us all.",checked:!1},{id:101,title:"Spyware Removal",price:99.99,imgUrl:"../../../assets/service/spywareRemoval.png",desc:"Has your computer been running slow? Afraid you've been hacked?",checked:!1},{id:102,title:"RAM Upgrade",price:129.99,imgUrl:"../../../assets/service/ramUpgrade.png",desc:"One simple price for RAM upgrade. You can't beat that.",checked:!1},{id:103,title:"Software Installation",price:49.99,imgUrl:"../../../assets/service/softwareInstall.png",desc:"Have us professionally install your software for you.",checked:!1},{id:104,title:"PC Tune-up",price:89.99,imgUrl:"../../../assets/service/pcTuneUp.png",desc:"Expect more of your PC? Let us optimize your machines performance.",checked:!1},{id:105,title:"Keyboard Cleaning",price:45,imgUrl:"../../../assets/service/keyboardCleaning.png",desc:"You've probably long forgotten what it felt like to type on your new PC. Let us revitalize that experience with a cleaning.",checked:!1},{id:106,title:"Disk Clean-up",price:129.99,imgUrl:"../../../assets/service/diskCleanUp.png",desc:"Free up space on your computer's hard drive to do more of the things you want.",checked:!1}]}getProducts(){return this.products}}return(r=t).\u0275fac=function(i){return new(i||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),t})();var v=l(9862),m=l(459),c=l(95);function Z(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"fieldset",8)(4,"legend"),e._uU(5),e.qZA(),e.TgZ(6,"div",9)(7,"input",20),e.NdJ("ngModelChange",function(s){const d=e.CHM(o).$implicit;return e.KtG(d.checked=s)}),e.qZA(),e.TgZ(8,"label",21),e._uU(9),e.ALo(10,"currency"),e.qZA(),e._UZ(11,"br"),e.qZA()()(),e.TgZ(12,"figure"),e._UZ(13,"img",22),e.qZA(),e.TgZ(14,"div",12),e._uU(15),e.qZA()()()}if(2&r){const o=t.$implicit;e.xp6(5),e.Oqu(o.title),e.xp6(2),e.Q6J("value",o.price)("ngModel",o.checked)("name",o.title),e.xp6(2),e.Oqu(e.xi3(10,8,o.price,"USD")),e.xp6(4),e.MGl("alt","",o.title," Icon"),e.Q6J("src",o.imgUrl,e.LSH),e.xp6(2),e.Oqu(o.desc)}}function _(r,t){if(1&r&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.hij(" ",o.errorMessage," ")}}function b(r,t){1&r&&(e.TgZ(0,"span",24),e._uU(1,"Submit"),e.qZA())}function T(r,t){1&r&&(e.TgZ(0,"div"),e._UZ(1,"span",25),e._uU(2,"Loading... "),e.qZA())}function S(r,t){if(1&r&&(e.TgZ(0,"div",26)(1,"div",27),e._uU(2),e.qZA(),e.TgZ(3,"div",28),e._uU(4),e.ALo(5,"currency"),e.qZA()()),2&r){const o=t.$implicit;e.xp6(2),e.hij("",o.title,":"),e.xp6(2),e.Oqu(e.lcZ(5,2,o.price))}}const C=[{path:"service",component:(()=>{var r;class t{constructor(i,s,n,d){this.menuService=i,this.router=s,this.httpClient=n,this.cookieService=d,this.isLoading=!1,this.formSubmitted=!1,this.lineItems=[],this.lineItemTotal=0,this.partsAmount=0,this.laborAmount=0,this.invoiceTotal=0,this.id=Math.floor(9e4*Math.random())+1e4,this.date=(new Date).toLocaleDateString(),this.products=this.menuService.getProducts(),this.order=new h,console.log("Product Listing: ",this.products);const a=this.cookieService.get("session_user");a&&(this.user=JSON.parse(a),console.log("User:",this.user)),this.errorMessage=""}getOrderTotal(){let i=0;for(let s of this.lineItems)i+=s.price;return console.log("Menu Items Total: ",i),i+=parseFloat(this.partsAmount.toString()),i+=parseFloat((50*this.laborAmount).toString()),console.log("Total after parts and labor: ",i),i.toFixed(2)}generateOrder(){this.formSubmitted=!0,console.log("Order",this.order),console.log("Products",this.products),this.isLoading=!0;for(let n of this.products)if(n.checked){const{title:d,price:a}=n;this.order.lineItems.push({title:d,price:a})}this.order.itemsTotal(),console.log("Ordered Items:",this.order.lineItems),console.log("Ordered Parts:",this.order.partsAmount),console.log("Ordered Labor:",this.order.laborAmount),console.log("Order Total:",this.order.getOrderTotal()),this.order.partsAmount=parseFloat(this.order.partsAmount.toString()),this.order.laborAmount=50*parseFloat(this.order.laborAmount.toString()),this.order.invoiceTotal=parseFloat(this.order.getOrderTotal()),console.log("Order",this.order);const i=this.cookieService.get("session_user"),s=JSON.parse(i);this.order.email=s.email,this.order.fullName=s.fullName,this.httpClient.post("/api/invoices",this.order).subscribe({next:n=>{this.isLoading=!1,console.log("result",n),this.router.navigate(["shop/order-summary"],{queryParams:{order:JSON.stringify(this.order)}})},error:n=>{n.error.message?(console.log("db error: ",n.error.message),this.errorMessage=n.error.message,this.isLoading=!1):(this.errorMessage="Something went wrong",console.log(n),this.isLoading=!1)}}),this.router.navigate(["shop/order-summary"],{queryParams:{order:JSON.stringify(this.order)}})}}return(r=t).\u0275fac=function(i){return new(i||r)(e.Y36(f),e.Y36(p.F0),e.Y36(v.eN),e.Y36(m.N))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-service"]],decls:36,vars:6,consts:[[1,"container"],[3,"submit"],["orderForm","ngForm"],[1,"row","d-flex","justify-content-center","mt-5"],["class","col-lg-4 col-md-6 col-sm-12",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"card","shadow"],[1,"card-title"],[1,"p-3"],[1,"d-flex","justify-content-around"],["type","text","id","parts","name","parts",3,"ngModel","ngModelChange"],["src","../../../assets/service/parts.png","alt","Parts Icon",1,"img-fluid"],[1,"card-footer"],["type","text","id","labor","name","labor",3,"ngModel","ngModelChange"],["src","../../../assets/service/labor.png","alt","Labor Icon",1,"img-fluid"],[1,"d-grid","mt-5","col-8"],["class","alert alert-danger",4,"ngIf"],["type","submit","id","submit","value","Place Order",1,"btn","text-light","brown"],["class","text-hp",4,"ngIf"],[4,"ngIf"],["type","checkbox",3,"value","ngModel","name","ngModelChange"],["for","passwordReset"],[1,"img-fluid",3,"src","alt"],[1,"alert","alert-danger"],[1,"text-hp"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("submit",function(){e.CHM(n);const a=e.MAs(2);return s.generateOrder(),e.KtG(a.reset())}),e.TgZ(3,"div",3),e.YNc(4,Z,16,11,"div",4),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"fieldset",8)(9,"legend"),e._uU(10,"Parts"),e.qZA(),e.TgZ(11,"div",9)(12,"input",10),e.NdJ("ngModelChange",function(a){return s.order.partsAmount=a}),e.qZA(),e._UZ(13,"br"),e.qZA()()(),e.TgZ(14,"figure"),e._UZ(15,"img",11),e.qZA(),e.TgZ(16,"div",12),e._uU(17,"Please insert any additional fees associated with parts."),e.qZA()()(),e.TgZ(18,"div",5)(19,"div",6)(20,"div",7)(21,"fieldset",8)(22,"legend"),e._uU(23,"Labor"),e.qZA(),e.TgZ(24,"div",9)(25,"input",13),e.NdJ("ngModelChange",function(a){return s.order.laborAmount=a}),e.qZA(),e._UZ(26,"br"),e.qZA()()(),e.TgZ(27,"figure"),e._UZ(28,"img",14),e.qZA(),e.TgZ(29,"div",12),e._uU(30,"Labor is $50 / Hour. Please insert how many hours needed."),e.qZA()()(),e.TgZ(31,"div",15),e.YNc(32,_,2,1,"div",16),e.TgZ(33,"button",17),e.YNc(34,b,2,0,"span",18),e.YNc(35,T,3,0,"div",19),e.qZA()()()()()}2&i&&(e.xp6(4),e.Q6J("ngForOf",s.products),e.xp6(8),e.Q6J("ngModel",s.order.partsAmount),e.xp6(13),e.Q6J("ngModel",s.order.laborAmount),e.xp6(7),e.Q6J("ngIf",s.formSubmitted&&s.errorMessage),e.xp6(2),e.Q6J("ngIf",!s.isLoading),e.xp6(1),e.Q6J("ngIf",s.isLoading))},dependencies:[u.sg,u.O5,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.On,c.F,u.H9],styles:[".card[_ngcontent-%COMP%]{border-radius:15px;margin:.5rem}.card-title[_ngcontent-%COMP%]{background-color:#372e29;border-radius:15px 15px 0 0;color:#fff}.brown[_ngcontent-%COMP%]{background-color:#372e29}.card-footer[_ngcontent-%COMP%]{background-color:#ffd25f;border-radius:0 0 15px 15px}figure[_ngcontent-%COMP%]{text-align:center;min-height:100px;display:flex;justify-content:center;align-items:center}"]}),t})(),canActivate:[l(3706).p]},{path:"order-summary",component:(()=>{var r;class t{constructor(i,s,n){this.route=i,this.router=s,this.cookieService=n,this.printing=!1,this.order={};const d=this.route.snapshot.queryParamMap.get("order");this.order=null!==d?JSON.parse(d):{},(!this.order.lineItems||0===this.order.lineItems.length)&&this.router.navigate(["/"]);const a=this.cookieService.get("session_user");a&&(this.user=JSON.parse(a),console.log("User:",this.user)),console.log("Order Summary:",this.order),console.log("Order Total:",this.order.invoiceTotal)}printPage(){this.printing=!0,window.print(),this.printing=!1}}return(r=t).\u0275fac=function(i){return new(i||r)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(m.N))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-summary"]],decls:46,vars:16,consts:[[1,"container","mt-3"],[1,"row","justify-content-center"],[1,"col-lg-6","col-md-10","col-sm-12"],[1,"card"],[1,"card-title"],[1,"m-3"],[1,"order-summary__header-date"],[1,"order-summary__header-user"],[1,"mt-3"],[2,"font-weight","600"],[1,"card-body"],["class","card-item",4,"ngFor","ngForOf"],[1,"card-parts"],[1,"card-parts-label"],[1,"card-parts-value"],[1,"card-labor"],[1,"card-labor-label"],[1,"card-labor-value"],[1,"card-footer"],[1,"row"],[1,"col"],[1,"card-footer-label"],[1,"card-footer-value"],[1,"btn","brown","text-white","hide-on-print",3,"click"],[1,"text-hp"],["routerLink","/shop/service",1,"hide-on-print"],[1,"card-item"],[1,"card-item-name"],[1,"card-item-price"]],template:function(i,s){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),e._uU(7),e.qZA(),e.TgZ(8,"div",6),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"div",7)(12,"p",8)(13,"span",9),e._uU(14),e.qZA(),e._UZ(15,"br"),e._uU(16),e.qZA()()()(),e.TgZ(17,"div",10),e.YNc(18,S,6,4,"div",11),e.TgZ(19,"div",12)(20,"div",13),e._uU(21,"Parts:"),e.qZA(),e.TgZ(22,"div",14),e._uU(23),e.ALo(24,"currency"),e.qZA()(),e.TgZ(25,"div",15)(26,"div",16),e._uU(27,"Labor:"),e.qZA(),e.TgZ(28,"div",17),e._uU(29),e.ALo(30,"currency"),e.qZA()()(),e.TgZ(31,"div",18)(32,"div",19)(33,"div",20)(34,"p")(35,"span",21),e._uU(36,"Order Total:"),e.qZA(),e.TgZ(37,"span",22),e._uU(38),e.ALo(39,"currency"),e.qZA()()(),e.TgZ(40,"div",20)(41,"button",23),e.NdJ("click",function(){return s.printPage()}),e.TgZ(42,"span",24),e._uU(43,"Print Page"),e.qZA()()()()()(),e.TgZ(44,"a",25),e._uU(45,"Place new order"),e.qZA()()()()),2&i&&(e.xp6(7),e.hij("Order #",s.order.id,""),e.xp6(2),e.Oqu(e.lcZ(10,8,s.order.date)),e.xp6(5),e.Oqu(s.user.fullName),e.xp6(2),e.hij("",s.user.email," "),e.xp6(2),e.Q6J("ngForOf",s.order.lineItems),e.xp6(5),e.Oqu(e.lcZ(24,10,s.order.partsAmount)),e.xp6(6),e.Oqu(e.lcZ(30,12,s.order.laborAmount)),e.xp6(9),e.Oqu(e.lcZ(39,14,s.order.invoiceTotal)))},dependencies:[u.sg,p.rH,u.H9,u.uU],styles:[".card[_ngcontent-%COMP%]{margin-top:3em;border-radius:15px}.card-title[_ngcontent-%COMP%]{background-color:#372e29;border-radius:15px 15px 0 0;color:#fff}.brown[_ngcontent-%COMP%]{background-color:#372e29}.card-footer[_ngcontent-%COMP%]{background-color:#ffd25f;border-radius:0 0 15px 15px}","@media print{.hide-on-print[_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{box-shadow:none;border:none;background-color:transparent}}"]}),t})(),title:"Order Summary page"}];let M=(()=>{var r;class t{}return(r=t).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.Bz.forChild(C),p.Bz]}),t})(),U=(()=>{var r;class t{}return(r=t).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.ez,p.Bz,M,c.u5,c.UX]}),t})()}}]);